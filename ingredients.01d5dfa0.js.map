{"mappings":"sgBAAA,IAAAA,EAAAC,EAAA,S,oDAMA,MAAMC,EAAc,IAAI,EAAAC,EAAAC,SAElBC,EAAiBC,SAASC,cAAc,+BACxCC,EAAqBF,SAASC,cAAc,yBAMtC,SAAHE,IAKPJ,EAAeK,mBAAmB,cAJlB,kH,CAiBD,GAvBjBF,EAAmBG,iBAAiB,SA8C3B,SAAAC,EAAWC,GAClB,MAAMC,EAAeD,EAAME,OAAOC,QAAQC,GAC1C,GAAIf,EAAYgB,YAAYC,SAASL,GAUnC,OATAZ,EAAYkB,iBAAiBN,GAC7BR,SACGC,cAAc,eAAeO,OAC7BO,QAAQ,+BACRC,cACoC,IAAnCpB,EAAYgB,YAAYK,SAC1Bd,IACAD,EAAmBgB,oBAAoB,QAASZ,I,IAvDtDP,EAAeM,iBAAiB,QAASc,EAAAC,qBAsBF,IAAnCxB,EAAYgB,YAAYK,OAC1B,OAAOd,KAIOkB,iBACd,IACE,MAAMT,EAAchB,EAAYgB,YAE1BU,QAAmBC,QAAQC,IAC/BZ,EAAYa,KAAIJ,MAAMV,SAnBvBU,eAA2BV,GAC9B,IACE,MAAMe,KAAEA,SAAehC,EAAAI,QAAM6B,IAAI,GAAGC,EAAA9B,yBAA0Ba,KAC9D,OAAOe,EAAKd,YAAY,E,CACxB,MAAOiB,GACPC,QAAQC,IAAIF,E,EAeKG,CAAiBrB,MAG7Bf,EAAYgB,aACfqB,qBAyBN,SAA8BP,GAC5B,IAAIQ,EAAOR,EACRD,KAAIU,GACI,qGAC8CA,EAAKC,8EACPD,EAAKE,iJAEgBF,EAAKC,0JAGpCD,EAAKG,oLAGrBC,wHAO1BC,KAAK,IACRzC,EAAeK,mBAAmB,YAAa8B,E,CA5CtCO,CAAqBnB,E,CAC5B,MAAOO,GACPC,QAAQC,IAAIF,E,EAhBhBa,E,sCCpCAC,EAAAC,QAAiB,IAAAC,IAAoBlD,EAAA,SAAAmD,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,U,ICA5FvD,EAAA,SAAAwD,SAA8CC,KAAKC,MAAM,uG","sources":["src/js/favoritIngredients.js","node_modules/@parcel/runtime-js/lib/runtime-44e7bd74d9a8b620.js","node_modules/@parcel/runtime-js/lib/runtime-5aa7321886bc72b4.js"],"sourcesContent":["import axios from 'axios';\nimport FavoritesList from './favorites-storage-class';\nimport BASE_URL from './base-url';\nimport * as icons from '../images/icons.svg';\nimport { openModalIngredient } from '../js/modals/modal-ingredient';\n\nconst storageData = new FavoritesList();\n\nconst listIngridient = document.querySelector('.favorite-ingredients__list');\nconst galleryFavoritsIng = document.querySelector('.favorite-ingredients');\ngalleryFavoritsIng.addEventListener('click', onBtnClick);\nlistIngridient.addEventListener('click', openModalIngredient);\n\n// Пустий список//\n\nfunction renderListIngredient() {\n  const message = `  <p class=\"favorite-ingredients__text\">\n          You haven't added any favorite ingridients yet\n      </p>`;\n\n  listIngridient.insertAdjacentHTML('beforebegin', message);\n}\n\n//Запит API//\nasync function fetchDataCoctail(id) {\n  try {\n    const { data } = await axios.get(`${BASE_URL}lookup.php?iid=${id}`);\n    return data.ingredients[0];\n  } catch (error) {\n    console.log(error);\n  }\n}\n//Перевірка на пустий localStorage//\nif (storageData.ingredients.length === 0) {\n  return renderListIngredient();\n}\napiForIdIngredient();\n//Запит по id на коктель//\nasync function apiForIdIngredient() {\n  try {\n    const ingredients = storageData.ingredients;\n\n    const ingredient = await Promise.all(\n      ingredients.map(async id => {\n        return await fetchDataCoctail(id);\n      })\n    );\n    if (!storageData.ingredients) {\n      renderListCocktail();\n    }\n    return createCardIngridient(ingredient);\n  } catch (error) {\n    console.log(error);\n  }\n}\n//Видалити з localStorage//\nfunction onBtnClick(event) {\n  const ingredientId = event.target.dataset.id;\n  if (storageData.ingredients.includes(ingredientId)) {\n    storageData.removeIngredient(ingredientId);\n    document\n      .querySelector(`[data-id = '${ingredientId}']`)\n      .closest('.favorite-ingredients__item')\n      .remove();\n    if (storageData.ingredients.length === 0) {\n      renderListIngredient();\n      galleryFavoritsIng.removeEventListener('click', onBtnClick);\n    }\n    return;\n  }\n}\n//Рендер картки//\n\nfunction createCardIngridient(data) {\n  let card = data\n    .map(item => {\n      return `<li class=\"favorite-ingredients__item\">\n            <h2 class=\"favorite-ingredients__item-title\">${item.strIngredient}</h2>\n            <p class=\"favorite-ingredients__item-text\">${item.strType}</p>\n            <div class=\"favorite-button-container\">\n              <button type=\"button\"  data-type=\"open-ingredient\" data-name=\"${item.strIngredient}\" class=\"favorite-button__learn-more\">\n                Learn more\n              </button>\n              <button type=\"button\" data-id=\"${item.idIngredient}\" class=\"favorite-button__remove\">\n                Remove\n                <svg class=\"favorite-button__icon\" width=\"17\" height=\"15\">\n                  <use href=\"${icons}#icon-full-heart\"></use>\n                </svg>\n              </button>\n            </div>\n          </li>\n  `;\n    })\n    .join('');\n  listIngridient.insertAdjacentHTML('beforeend', card);\n}\n\nexport { renderListIngredient };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8OQ7p\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"dkGci\\\":\\\"ingredients.01d5dfa0.js\\\",\\\"8OQ7p\\\":\\\"icons.5e4a2d51.svg\\\"}\"));"],"names":["$2shzp","parcelRequire","storageData","$5yGqQ","default","listIngridient","document","querySelector","galleryFavoritsIng","renderListIngredient","insertAdjacentHTML","addEventListener","onBtnClick","event","ingredientId","target","dataset","id","ingredients","includes","removeIngredient","closest","remove","length","removeEventListener","$cIEfb","openModalIngredient","async","ingredient","Promise","all","map","data","get","$FBrWo","error","console","log","fetchDataCoctail","renderListCocktail","card","item","strIngredient","strType","idIngredient","$jrD5E","join","createCardIngridient","apiForIdIngredient","module","exports","URL","resolve","import","meta","url","toString","register","JSON","parse"],"version":3,"file":"ingredients.01d5dfa0.js.map"}